# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∫–ª–∞–Ω–∞
**–§–∞–π–ª:** `bot/utils/clan_helpers.py`

–§—É–Ω–∫—Ü–∏—è `get_clan_from_args()` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- ‚úÖ –ë–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ ‚Üí –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω (–∏–ª–∏ –ø–µ—Ä–≤—ã–π)
- ‚úÖ –ù–æ–º–µ—Ä –∫–ª–∞–Ω–∞ ‚Üí `/war 2`, `/raids 3`
- ‚úÖ –ü–µ—Ä–≤—ã–µ –±—É–∫–≤—ã ‚Üí `/leadership wa`, `/top_donors ru`

```python
async def get_clan_from_args(db_service, chat_id: int, args: Optional[str] = None)
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ 4 –∫–æ–º–∞–Ω–¥—ã —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø:

#### `/war [–Ω–æ–º–µ—Ä|–±—É–∫–≤—ã]`
- `/war` ‚Üí –≤–æ–π–Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/war 2` ‚Üí –≤–æ–π–Ω–∞ –∫–ª–∞–Ω–∞ ‚Ññ2
- `/war wa` ‚Üí –≤–æ–π–Ω–∞ –∫–ª–∞–Ω–∞ "Warriors"

#### `/raids [–Ω–æ–º–µ—Ä|–±—É–∫–≤—ã]`
- `/raids` ‚Üí —Ä–µ–π–¥—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/raids 3` ‚Üí —Ä–µ–π–¥—ã –∫–ª–∞–Ω–∞ ‚Ññ3
- `/raids ru` ‚Üí —Ä–µ–π–¥—ã –∫–ª–∞–Ω–∞ "Russian"

#### `/leadership [–Ω–æ–º–µ—Ä|–±—É–∫–≤—ã]`
- `/leadership` ‚Üí —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/leadership 1` ‚Üí —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–ª–∞–Ω–∞ ‚Ññ1
- `/leadership my` ‚Üí —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–ª–∞–Ω–∞ "MyTeam"

#### `/top_donors [–Ω–æ–º–µ—Ä|–±—É–∫–≤—ã]`
- `/top_donors` ‚Üí –¥–æ–Ω–∞—Ç—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/top_donors 4` ‚Üí –¥–æ–Ω–∞—Ç—ã –∫–ª–∞–Ω–∞ ‚Ññ4
- `/top_donors el` ‚Üí –¥–æ–Ω–∞—Ç—ã –∫–ª–∞–Ω–∞ "Elite"

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ß–∞—Ç —Å 3 –∫–ª–∞–Ω–∞–º–∏
```
1. Warriors (#ABC123)
2. Russian Team (#DEF456)
3. Elite Squad (#GHI789)
```

**–ö–æ–º–∞–Ω–¥—ã:**
- `/war` ‚Üí –≤–æ–π–Ω–∞ Warriors (–æ—Å–Ω–æ–≤–Ω–æ–π)
- `/war 2` ‚Üí –≤–æ–π–Ω–∞ Russian Team
- `/raids ru` ‚Üí —Ä–µ–π–¥—ã Russian Team
- `/leadership 3` ‚Üí —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Elite Squad
- `/top_donors el` ‚Üí –¥–æ–Ω–∞—Ç—ã Elite Squad

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –±—É–∫–≤–∞–º
```
1. Alpha Clan (#AAA111)
2. Beta Warriors (#BBB222)
3. Gamma Force (#CCC333)
```

**–ö–æ–º–∞–Ω–¥—ã:**
- `/war a` ‚Üí –≤–æ–π–Ω–∞ Alpha Clan
- `/raids b` ‚Üí —Ä–µ–π–¥—ã Beta Warriors
- `/leadership g` ‚Üí —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ Gamma Force

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞ –∫–ª–∞–Ω–∞:
1. **–ù–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–∞** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω (default_clan_id) –∏–ª–∏ –ø–µ—Ä–≤—ã–π
2. **–ß–∏—Å–ª–æ** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª–∞–Ω –ø–æ –Ω–æ–º–µ—Ä—É –≤ —Å–ø–∏—Å–∫–µ (1-based)
3. **–°—Ç—Ä–æ–∫–∞** ‚Üí –∏—â–µ—Ç –∫–ª–∞–Ω, –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —ç—Ç–∏—Ö –±—É–∫–≤ (case-insensitive)
4. **–ù–µ –Ω–∞–π–¥–µ–Ω–æ** ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
–ï—Å–ª–∏ –∫–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É:
```
‚ùå –ö–ª–∞–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω!

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
‚Ä¢ /war - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω
‚Ä¢ /war 2 - –∫–ª–∞–Ω ‚Ññ2
‚Ä¢ /war wa - –∫–ª–∞–Ω –ø–æ –ø–µ—Ä–≤—ã–º –±—É–∫–≤–∞–º
‚Ä¢ /clan_list - —Å–ø–∏—Å–æ–∫ –∫–ª–∞–Ω–æ–≤
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚ùå –ú–æ–∂–Ω–æ –±—ã–ª–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω
- ‚ùå –î–ª—è –¥—Ä—É–≥–∏—Ö –∫–ª–∞–Ω–æ–≤ –Ω—É–∂–Ω–æ –±—ã–ª–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ–≥

### –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ª—é–±–æ–º—É –∫–ª–∞–Ω—É –ø–æ –Ω–æ–º–µ—Ä—É
- ‚úÖ –£–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø–æ –ø–µ—Ä–≤—ã–º –±—É–∫–≤–∞–º –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ = –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω)
- ‚úÖ –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

---

## üìä –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **bot/utils/clan_helpers.py**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_clan_from_args()`

2. **bot/handlers/extended_clash_commands.py**
   - –ò–º–ø–æ—Ä—Ç `get_clan_from_args`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/war`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/raids`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/leadership`
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/top_donors`

---

## üéâ –°—Ç–∞—Ç—É—Å: –ó–ê–í–ï–†–®–ï–ù–û

–í—Å–µ 4 –∫–æ–º–∞–Ω–¥—ã —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞–±–æ—Ç—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∞–Ω–∞–º–∏!

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** ~30 –º–∏–Ω—É—Ç  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–´–ô ‚úÖ  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º —á–∞—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∞–Ω–∞–º–∏
