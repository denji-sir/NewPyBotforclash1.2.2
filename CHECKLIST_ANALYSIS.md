# üìã –ê–Ω–∞–ª–∏–∑ —á–µ–∫-–ª–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–π –±–æ—Ç–∞

## üéØ –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π

–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: 12 –æ–∫—Ç—è–±—Ä—è 2025

---

## üè∞ **–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–Ω–∞–º–∏**

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞–Ω–æ–≤:**
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç –∫–ª–∞–Ω—ã: `/register_clan #CLANTAG`
   - –ö–ª–∞–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ –ë–î —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —á–∞—Ç—É

2. **–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω:**
   - –ü–µ—Ä–≤—ã–π –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫–ª–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º
   - –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å: `/set_default_clan <–Ω–æ–º–µ—Ä>`

3. **–î–æ—Å—Ç—É–ø –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ:**
   - **–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω:** `/war`, `/raids`, `/leadership` (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
   - **–î—Ä—É–≥–∏–µ –∫–ª–∞–Ω—ã:** `/war 2`, `/raids 3`, `/leadership 1` (–ø–æ –Ω–æ–º–µ—Ä—É)
   - –ù–æ–º–µ—Ä –∫–ª–∞–Ω–∞ = –ø–æ—Ä—è–¥–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è (1, 2, 3...)

4. **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–ª–∞–Ω–æ–≤:**
   - `/clan_list` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞–Ω–æ–≤ —á–∞—Ç–∞
   - `/clan_info <–Ω–æ–º–µ—Ä>` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞–Ω–µ

### ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–µ–π—á–∞—Å –∫–æ–º–∞–Ω–¥—ã `/war`, `/raids`, `/leadership`, `/top_donors` —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å –ø–µ—Ä–≤—ã–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª–∞–Ω–æ–º (–æ—Å–Ω–æ–≤–Ω—ã–º). 

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `/war` - –≤–æ–π–Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/raids` - —Ä–µ–π–¥—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞

**–ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå `/war 2` - –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥–∏–º –∫–ª–∞–Ω–∞–º –ø–æ –Ω–æ–º–µ—Ä—É
- ‚ùå `/raids wa` - –¥–æ—Å—Ç—É–ø –ø–æ –ø–µ—Ä–≤—ã–º –±—É–∫–≤–∞–º –Ω–∞–∑–≤–∞–Ω–∏—è
- ‚ùå –í—ã–±–æ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞:** –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ (–Ω–æ–º–µ—Ä/–±—É–∫–≤—ã) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–Ω—ã–º –∫–ª–∞–Ω–∞–º.

**–í–∞–∂–Ω–æ:** –°–∏—Å—Ç–µ–º–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–≥–∏ –∫–ª–∞–Ω–æ–≤ (#CLANTAG) –≤ –∫–æ–º–∞–Ω–¥–∞—Ö –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏. –¢–µ–≥–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∞–Ω–∞.

---

## ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### 1. ‚úÖ –ö–í (–ö–ª–∞–Ω–æ–≤—ã–µ –≤–æ–π–Ω—ã) - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∞–Ω–∞–º–∏:**
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç –∫–ª–∞–Ω—ã —á–µ—Ä–µ–∑ `/register_clan #CLANTAG`
- –ü–µ—Ä–≤—ã–π –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–π –∫–ª–∞–Ω = –æ—Å–Ω–æ–≤–Ω–æ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–ª–∞–Ω—ã –ø–æ–ª—É—á–∞—é—Ç –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä (1, 2, 3...)
- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞: `/war` (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞–Ω) –∏–ª–∏ `/war 2` (–∫–ª–∞–Ω ‚Ññ2)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `/war` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –≤–æ–π–Ω–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/war <–Ω–æ–º–µ—Ä>` - –í–æ–π–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/war 2`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ–π–Ω –≤—Å–µ—Ö –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∞–Ω–æ–≤
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∞–ª–µ/–æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≤–æ–π–Ω
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–æ–π–Ω –≤ –ë–î
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞—Ç–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–§–∞–π–ª—ã:**
- `bot/handlers/extended_clash_commands.py` - –∫–æ–º–∞–Ω–¥—ã –ö–í
- `bot/handlers/clan_commands.py` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞–Ω–æ–≤
- `bot/services/war_stats_service.py` - —Å–µ—Ä–≤–∏—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- `bot/services/war_monitor_scheduler.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `bot/services/war_notification_service.py` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `bot/services/clan_database_service.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–∞–º–∏

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `registered_clans` - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞–Ω—ã —á–∞—Ç–∞
- –¢–∞–±–ª–∏—Ü–∞ `war_history` - –∏—Å—Ç–æ—Ä–∏—è –≤–æ–π–Ω
- –¢–∞–±–ª–∏—Ü–∞ `war_attacks` - –∞—Ç–∞–∫–∏ –≤ –≤–æ–π–Ω–∞—Ö
- –¢–∞–±–ª–∏—Ü–∞ `war_participants` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≤–æ–π–Ω

---

### 2. ‚úÖ –õ–í–ö (–õ–∏–≥–∞ –≤–æ–µ–Ω–Ω—ã—Ö –∫–ª–∞–Ω–æ–≤) - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**
- `/cwl` - –õ–í–ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/cwl <–Ω–æ–º–µ—Ä>` - –õ–í–ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/cwl 2`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ —á–∞—Ç–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –õ–í–ö
- Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `cwl:` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CoC API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –õ–í–ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã, —Ä–∞—É–Ω–¥–∞, –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–∏–≥–µ

**–§–∞–π–ª—ã:**
- `bot/handlers/extended_clash_commands.py` - –∫–æ–º–∞–Ω–¥—ã –õ–í–ö
- `bot/services/extended_clash_api.py` - API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –õ–í–ö –≤ –ë–î –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å

---

### 3. ‚úÖ –†–µ–π–¥—ã (Capital Raids) - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**
- `/raids` - –†–µ–π–¥—ã –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/raids <–Ω–æ–º–µ—Ä>` - –†–µ–π–¥—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/raids 2`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ—Ö –∫–ª–∞–Ω–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–π–¥–∞—Ö –∫–∞–ø–∏—Ç–∞–ª–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–π–¥-–≤—ã—Ö–æ–¥–Ω—ã—Ö (`save_raid_weekend_result`)
- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–π–¥–æ–≤ –∫–ª–∞–Ω–∞ (`get_clan_raid_history`)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–µ–π–¥–∞—Ö (`get_player_raid_stats`)
- –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤ —Ä–µ–π–¥–æ–≤ (`get_raid_leaderboard`)

**–§–∞–π–ª—ã:**
- `bot/handlers/extended_clash_commands.py` - –∫–æ–º–∞–Ω–¥—ã —Ä–µ–π–¥–æ–≤
- `bot/services/raid_stats_service.py` - —Å–µ—Ä–≤–∏—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–µ–π–¥–æ–≤

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `raid_weekends` - —Ä–µ–π–¥-–≤—ã—Ö–æ–¥–Ω—ã–µ
- –¢–∞–±–ª–∏—Ü–∞ `raid_player_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
- –¢–∞–±–ª–∏—Ü–∞ `raid_attacks` - –∞—Ç–∞–∫–∏ –≤ —Ä–µ–π–¥–∞—Ö

---

### 4. ‚úÖ –ü–∞—Å–ø–æ—Ä—Ç - –°–∏—Å—Ç–µ–º–∞ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `/create_passport` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–∞
- `/passport` - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –ø–∞—Å–ø–æ—Ä—Ç–∞
- `/edit_passport` - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–∞
- `/plist` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –≤ —á–∞—Ç–µ
- `/dpassport` - –£–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Å–ø–æ—Ä—Ç–∞
- –ü—Ä–∏–≤—è–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –∫ –ø–∞—Å–ø–æ—Ä—Ç–∞–º
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏–≤—è–∑–æ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏

**–§–∞–π–ª—ã:**
- `bot/handlers/passport_commands.py` - –∫–æ–º–∞–Ω–¥—ã –ø–∞—Å–ø–æ—Ä—Ç–æ–≤
- `bot/services/passport_system_manager.py` - –º–µ–Ω–µ–¥–∂–µ—Ä —Å–∏—Å—Ç–µ–º—ã
- `bot/services/passport_database_service.py` - –ë–î —Å–µ—Ä–≤–∏—Å
- `bot/models/passport_models.py` - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- –¢–∞–±–ª–∏—Ü–∞ `passports` - –ø–∞—Å–ø–æ—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–∞–±–ª–∏—Ü–∞ `passport_operation_logs` - –ª–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π

---

### 5. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ø–∞—Å–ø–æ—Ä—Ç–∞—Ö
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –ø–∞—Å–ø–æ—Ä—Ç–µ
- –°—á–µ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–æ–º–∞–Ω–¥, –¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∏–≥—Ä–æ–∫—É CoC —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–æ–≤

**–ú–æ–¥–µ–ª–∏:**
```python
@dataclass
class PassportStats:
    messages_count: int = 0
    commands_used: int = 0
    days_active: int = 0
    clans_joined: int = 0
    achievements_count: int = 0
    last_activity: Optional[datetime] = None
```

---

### 6. ‚úÖ –î–æ–Ω–∞—Ç - –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**
- `/top_donors` - –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/top_donors <–Ω–æ–º–µ—Ä>` - –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –∫–ª–∞–Ω–∞ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ–Ω–∞—Ç–æ–≤
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–æ–Ω–∞—Ç–æ–≤

**–§–∞–π–ª—ã:**
- `bot/handlers/extended_clash_commands.py` - –∫–æ–º–∞–Ω–¥–∞ —Ç–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ CoC API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

### 7. ‚úÖ –õ–∏–¥–µ—Ä—ã –∫–ª–∞–Ω–∞
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**
- `/leadership` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- `/leadership <–Ω–æ–º–µ—Ä>` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞–Ω–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –∫–ª–∞–Ω–∞
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–∞, —Å–æ-–ª–∏–¥–µ—Ä–æ–≤, —Å—Ç–∞—Ä–µ–π—à–∏–Ω
- –†–æ–ª–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

**–§–∞–π–ª—ã:**
- `bot/handlers/extended_clash_commands.py` - –∫–æ–º–∞–Ω–¥–∞ –ª–∏–¥–µ—Ä–æ–≤

---

### 8. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ö–í
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–π–¥–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –≤–æ–π–Ω —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–π–¥–æ–≤ —Å –∞—Ç–∞–∫–∞–º–∏ –∏–≥—Ä–æ–∫–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–∞—Å–ø–æ—Ä—Ç–∞–º–∏

**–°–µ—Ä–≤–∏—Å—ã:**
- `war_stats_service.py` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ö–í
- `raid_stats_service.py` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–π–¥–æ–≤
- `passport_database_service.py` - –ª–æ–≥–∏ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤

---

### 9. ‚úÖ –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —á–∞—Ç—É –≤ –¢–ì –∫–∞–Ω–∞–ª–µ
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ
- –°—á–µ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ø–∞—Å–ø–æ—Ä—Ç–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
- –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–§–∞–π–ª—ã:**
- `bot/services/achievement_event_tracker.py` - —Ç—Ä–µ–∫–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
- `bot/models/passport_models.py` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ø–∞—Å–ø–æ—Ä—Ç–∞—Ö

**–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
- –î–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞
- –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### 10. ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏–≤—è–∑–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ (`/verify_player`)
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∞–º–∏ (`/apass`)
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (`/areport`)
- –ú–∞—Å—Å–æ–≤–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏–≤—è–∑–æ–∫
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è–º–∏ (`/greeting`)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞–Ω–æ–≤ (`/register_clan`)

**–§–∞–π–ª—ã:**
- `bot/handlers/admin_binding_commands.py` - –∞–¥–º–∏–Ω –∫–æ–º–∞–Ω–¥—ã
- `bot/services/binding_admin_service.py` - –∞–¥–º–∏–Ω —Å–µ—Ä–≤–∏—Å
- `bot/services/permission_service.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤

---

### 11. ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –ò–ò
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π (`achievement_integration.py`)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (`contextual_integration.py`)
- –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å AI —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å AI —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è AI

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å `bot/integrations/ai_module.py` —Å —É—Å–ª–æ–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π

---

### 12. ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —á–∞—Ç –∏ –º–µ–Ω—é
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ —á–∞—Ç
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –°–∏—Å—Ç–µ–º–∞ callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ UI
- –ù–∏–∫–∞–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
- –ü—Ä–∏–≤—è–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è–º–∏ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
- –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –ø–∞–Ω–µ–ª–∏

---

## üî∂ **–ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û / –¢–†–ï–ë–£–ï–¢ –£–õ–£–ß–®–ï–ù–ò–Ø**

### 1. ‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ —Ä–∞–∑–Ω—ã—Ö –∫–ª–∞–Ω–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª–∞–Ω–æ–º
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã `/war`, `/raids`, `/leadership`, `/top_donors` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã
- ‚úÖ –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–æ–º–µ—Ä –∏–ª–∏ –ø–µ—Ä–≤—ã–µ –±—É–∫–≤—ã –∫–ª–∞–Ω–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤: `/war 2`, `/raids 3`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤: `/war wa`, `/leadership ru`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `get_clan_from_args()` –≤ `bot/utils/clan_helpers.py`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **–ù–û–í–û–ï:** –ö–æ–º–∞–Ω–¥–∞ `/set_default_clan <–Ω–æ–º–µ—Ä>` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–ª–∞–Ω–∞
- ‚úÖ **–ù–û–í–û–ï:** –ö–æ–º–∞–Ω–¥–∞ `/rename_clan <–Ω–æ–º–µ—Ä> <–Ω–∞–∑–≤–∞–Ω–∏–µ>` - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–ª–∞–Ω–æ–≤
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º

**–§–∞–π–ª—ã:**
- `bot/utils/clan_helpers.py` - —Ñ—É–Ω–∫—Ü–∏—è `get_clan_from_args()`
- `bot/handlers/extended_clash_commands.py` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–∞–Ω–¥–∞—Ö
- `bot/handlers/clan_commands.py` - –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–ª–∞–Ω–∞–º–∏
- `bot/services/clan_database_service.py` - –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –ë–î
- `docs/MULTI_CLAN_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 2. üî∂ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –î–æ–Ω–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–∑ CoC API –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–Ω–∞—Ç–æ–≤

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- –¢–∞–±–ª–∏—Ü–∞ –ë–î –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–Ω–∞—Ç–æ–≤
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ/–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–Ω–∞—Ç–æ–≤
- –ì—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏ –¥–æ–Ω–∞—Ç–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

---

### 2. üî∂ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –≤—Ä–µ–º–µ–Ω–∏
**–°—Ç–∞—Ç—É—Å:** –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ò—Å—Ç–æ—Ä–∏—è –≤–æ–π–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–π–¥–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- –ù–µ—Ç —É–¥–æ–±–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
- –ö–æ–º–∞–Ω–¥—ã —Ç–∏–ø–∞ `/stats_period @user 7d` (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π)
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ (—ç—Ç–∞ –Ω–µ–¥–µ–ª—è vs –ø—Ä–æ—à–ª–∞—è)
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

---

### 3. ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
**–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç (`greeting_service.py`)
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã `/greeting`, `/greeting_on`, `/greeting_off`
- ‚úÖ –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è (–∫–Ω–æ–ø–∫–∞ "üìù –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç")
- ‚úÖ 6 –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π (friendly, clan_welcome, formal, gaming, helpful, community)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: `{name}`, `{username}`, `{mention}`, `{first_name}`
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏: —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ, –∫–Ω–æ–ø–∫–∞ –ø—Ä–∞–≤–∏–ª
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π

**–§–∞–π–ª—ã:**
- `bot/handlers/greeting_commands.py` - –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `bot/services/greeting_service.py` - —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π
- `bot/models/greeting_models.py` - –º–æ–¥–µ–ª–∏ –∏ —à–∞–±–ª–æ–Ω—ã

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π

---

## ‚ùå **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û / –¢–†–ï–ë–£–ï–¢ –†–ê–ó–†–ê–ë–û–¢–ö–ò**

### 1. ‚ùå –î–µ—Ç–∞–ª—å–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –¥–æ–Ω–∞—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
```sql
CREATE TABLE donation_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    player_tag TEXT NOT NULL,
    clan_tag TEXT NOT NULL,
    donations_sent INTEGER DEFAULT 0,
    donations_received INTEGER DEFAULT 0,
    recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    period_type TEXT, -- 'daily', 'weekly', 'monthly'
    UNIQUE(player_tag, clan_tag, recorded_at, period_type)
);
```

**–§—É–Ω–∫—Ü–∏–∏:**
- –ï–∂–µ–¥–Ω–µ–≤–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ö–æ–º–∞–Ω–¥—ã `/donation_history @user [period]`
- –ì—Ä–∞—Ñ–∏–∫–∏ –¥–æ–Ω–∞—Ç–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
- –¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

---

### 2. ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ö–æ–º–∞–Ω–¥–∞ `/player_stats @user --period 30d`
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏: `/compare_periods @user week1 week2`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ/–º–µ—Å—è—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–∫—É–±–∫–∏, –¥–æ–Ω–∞—Ç—ã, —Ä–µ–π–¥—ã)

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- `bot/services/period_analytics_service.py`
- `bot/handlers/analytics_commands.py`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π

---

### 3. ‚ùå –ú–æ–¥—É–ª—å –ò–ò –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
**–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
```python
# bot/integrations/ai_module.py
class AIModule:
    def __init__(self, enabled: bool = False):
        self.enabled = enabled
        if enabled:
            self._init_ai_services()
    
    def _init_ai_services(self):
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è AI —Å–µ—Ä–≤–∏—Å–æ–≤
        pass
    
    async def process_message(self, message):
        if not self.enabled:
            return None
        # AI –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```env
# .env
AI_MODULE_ENABLED=false
AI_MODEL=gpt-4
AI_API_KEY=...
```

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

---

### 4. ‚úÖ –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
**–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/greeting` —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "üìù –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç" –¥–ª—è –≤–≤–æ–¥–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: `{name}`, `{username}`, `{mention}`, `{first_name}`
- ‚úÖ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (—Ç–∞–±–ª–∏—Ü–∞ `greeting_settings`)
- ‚úÖ 6 –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ –Ω–∞ –≤—ã–±–æ—Ä
- ‚úÖ FSM –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞

**–¢–∞–±–ª–∏—Ü–∞ –ë–î:**
```sql
CREATE TABLE greeting_settings (
    chat_id INTEGER PRIMARY KEY,
    is_enabled BOOLEAN DEFAULT FALSE,
    greeting_text TEXT,
    welcome_sticker TEXT,
    delete_after_seconds INTEGER,
    mention_user BOOLEAN DEFAULT TRUE,
    show_rules_button BOOLEAN DEFAULT FALSE,
    rules_text TEXT,
    created_by INTEGER,
    created_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**–§–∞–π–ª—ã:**
- `bot/handlers/greeting_commands.py`
- `bot/services/greeting_service.py`
- `bot/models/greeting_models.py`

---

## üìä **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ—Ü–µ–Ω—Ç |
|-----------|--------|---------|
| –ö–í (—Å—Ç–∞—Ç—ã) | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –õ–í–ö (—Å—Ç–∞—Ç—ã) | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –†–µ–π–¥—ã | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –ü–∞—Å–ø–æ—Ä—Ç | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –ø–∞—Å–ø–æ—Ä—Ç–∞—Ö | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| –î–æ–Ω–∞—Ç (—Ç–µ–∫—É—â–∏–π) | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –õ–∏–¥–µ—Ä—ã –∫–ª–∞–Ω–∞ | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ö–í/–õ–í–ö/–†–µ–π–¥–æ–≤ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —á–∞—Ç—É | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 70% |
| –§—É–Ω–∫—Ü–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –ò–ò | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 40% |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —á–∞—Ç/–º–µ–Ω—é | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| **–ú—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |
| **–ò—Å—Ç–æ—Ä–∏—è –¥–æ–Ω–∞—Ç–æ–≤** | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 0% |
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥—ã** | üî∂ –ß–∞—Å—Ç–∏—á–Ω–æ | 30% |
| **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | 100% |

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** ~85% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ú—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã! –ö–æ–º–∞–Ω–¥—ã –ö–í/–õ–í–ö/–†–µ–π–¥–æ–≤/–î–æ–Ω–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ª—é–±—ã–º –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª–∞–Ω–æ–º —á–µ—Ä–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ã.

---

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º**

### ‚úÖ –ö–†–ò–¢–ò–ß–ù–´–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –í–´–ü–û–õ–ù–ï–ù–û:
1. ‚úÖ **–ú—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø** - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
   - –ü–∞—Ä—Å–∏–Ω–≥ –Ω–æ–º–µ—Ä–∞/–±—É–∫–≤ –∫–ª–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–º–∞–Ω–¥–∞—Ö `/war`, `/raids`, `/leadership`, `/top_donors`
   - –§—É–Ω–∫—Ü–∏—è `get_clan_from_args()` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
   - –ú–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∞–Ω–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã):
2. **–ò—Å—Ç–æ—Ä–∏—è –¥–æ–Ω–∞—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º** - –∫–ª—é—á–µ–≤–∞—è –º–µ—Ç—Ä–∏–∫–∞ –¥–ª—è –∫–ª–∞–Ω–æ–≤
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã** - –≤–∞–∂–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –õ–í–ö** - –¥–æ–±–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—É–ª—É—á—à–µ–Ω–∏–µ UX):
4. **–ú–æ–¥—É–ª—å –ò–ò –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** - –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
5. **–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
6. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã** - –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ/–º–µ—Å—è—á–Ω—ã–µ —Å–≤–æ–¥–∫–∏

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (nice to have):
7. ‚úÖ **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π** - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (—à–∞–±–ª–æ–Ω—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä)
8. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

---

## üìù **–ü–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–∫–∏**

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `donation_history`
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–Ω–∞—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å `period_analytics_service.py`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏—è (1 –Ω–µ–¥–µ–ª—è)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `ai_module.py` —Å —É—Å–ª–æ–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é AI –≤ `.env`
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –õ–í–ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –§–∞–∑–∞ 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —á–∞—Ç–∞

---

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

### 1. –°–µ—Ä–≤–∏—Å –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ–Ω–∞—Ç–æ–≤

```python
# bot/services/donation_history_service.py
class DonationHistoryService:
    async def save_daily_donations(self, clan_tag: str):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–Ω–∞—Ç—ã –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–ª–∞–Ω–∞"""
        
    async def get_donation_history(self, player_tag: str, period_days: int = 30):
        """–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–æ–Ω–∞—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞"""
        
    async def get_donation_leaderboard(self, clan_tag: str, period_days: int = 30):
        """–¢–æ–ø –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥"""
```

### 2. –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º

```python
# bot/services/period_analytics_service.py
class PeriodAnalyticsService:
    async def get_player_stats_for_period(self, player_tag: str, start_date, end_date):
        """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥"""
        
    async def compare_periods(self, player_tag: str, period1, period2):
        """–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –ø–µ—Ä–∏–æ–¥–æ–≤"""
        
    async def generate_weekly_report(self, chat_id: int):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞"""
```

### 3. –ú–æ–¥—É–ª—å –ò–ò

```python
# bot/integrations/ai_module.py
class AIModule:
    def __init__(self, config: dict):
        self.enabled = config.get('AI_MODULE_ENABLED', False)
        if self.enabled:
            self._init_ai()
    
    async def analyze_player_performance(self, player_data):
        """–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–∫–∞ —Å –ø–æ–º–æ—â—å—é –ò–ò"""
        
    async def generate_recommendations(self, clan_data):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è –∫–ª–∞–Ω–∞"""
```

---

## ‚úÖ **–í—ã–≤–æ–¥—ã**

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–∞—Å–ø–æ—Ä—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–Ω–∞–º–∏
- ‚úÖ –°–±–æ—Ä –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ö–í, –õ–í–ö, —Ä–µ–π–¥–æ–≤
- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–µ–Ω—é
- ‚úÖ –ü—Ä–∏–≤—è–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ —Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ **–ú—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø** - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û
  - –ö–æ–º–∞–Ω–¥—ã `/war`, `/raids`, `/leadership`, `/top_donors` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã
  - –†–∞–±–æ—Ç–∞–µ—Ç `/war 2` (–ø–æ –Ω–æ–º–µ—Ä—É), `/raids wa` (–ø–æ –ø–µ—Ä–≤—ã–º –±—É–∫–≤–∞–º)
  - –§—É–Ω–∫—Ü–∏—è `get_clan_from_args()` –≤ `bot/utils/clan_helpers.py`
  - **–°—Ç–∞—Ç—É—Å: –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢**

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å:
- üî∂ –ò—Å—Ç–æ—Ä–∏—è –¥–æ–Ω–∞—Ç–æ–≤ (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- üî∂ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Ä–∞–∑–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- üî∂ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –ò–ò (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:
**–ë–æ—Ç –Ω–∞ 85% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —á–µ–∫-–ª–∏—Å—Ç—É.** –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ú—É–ª—å—Ç–∏–∫–ª–∞–Ω–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç. –û—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É–ª—É—á—à–µ–Ω–∏—è: –∏—Å—Ç–æ—Ä–∏—è –¥–æ–Ω–∞—Ç–æ–≤ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º.
